# Database

## General 

### Index 

composite index RMDB - B+tree to optimize write

* 聚簇索引：主键索引的叶子节点存储着行数据
* 非聚簇索引： 叶子节点存储的是行数据地址，需要再寻址一次才能得到数据

### Misc

#### char vs varchar

* char: 长度固定，读取快
* varchar：长度不固定，节省空间

#### int\(20\)中20的涵义

指显示字符的长度。20表示最大显示宽度为20，但仍占4字节存储，存储范围不变

### Cache 

cache miss 

### Shard

Load Balancer 

Replica Master-Slave Slave will share read; Write ahead log 

Vertical sharding Pro: easy implement and maintainance Con: redundant; need to join 

Horizontal sharding Consistent hashing How to shard \(which key\)? How to maintain global ID Use a global atomic service to increment the id for every new row UUID\(string\) generated by the service 

Bloom Filter A big bit array + multiple hash function true negative, but tolerate false positive  

## MySQL

* **Innodb引擎**：Innodb引擎提供了对数据库ACID事务的支持。并且还提供了行级锁和外键的约束。聚簇索引。
* **MyIASM引擎**：不提供事务的支持，也不支持行级锁和外键。非聚簇索引

## Redis/Memcached 

cache shared session store data persist

## ElasticSearch

JSON + REST

inverted index to optimize read 

ELK

## MongoDB

document store, schema-less, indexable only one index document\(json\) = row join on write, do not use on read. so read is faster than RMDB

